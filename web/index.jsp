<%@ page contentType="text/html;charset=UTF-8" language="java" %><html><head>    <meta charset="utf-8">    <title>转盘</title>    <link rel="stylesheet" href="assets/sweetalert2.min.css">    <style>        .container{            padding: 50px 90px;        }        .rotate-bg {            float: left;            width: 509px;            height: 509px;            background: url(assets/ly-plate.png);            position: relative;            display: inline-block;        }        #lotteryBtn {            cursor: pointer;            position: absolute;            top: 147px;            left: 147px;        }        .wrapper{            margin-left: 80px;            float: left;        }        .person{            margin-bottom: 10px;        }        .person>span{            margin-right: 15px;        }    </style></head><body><div class="container">    <div class="rotate-bg">        <img src="assets/rotate-static.png" id="lotteryBtn">    </div>    <div class="wrapper">        <h2>中奖名单</h2>        <div id="luckyboys">        </div>    </div></div></body><script src="assets/jquery-1.7.2.min.js"></script><script src="assets/jQueryRotate.2.2.js"></script><script src="assets/jquery.easing.min.js"></script><script src="assets/sweetalert2.min.js"></script><script>    $(function () {        var timeOut = function () {            $("#lotteryBtn").rotate({                angle: 0,                duration: 10000,                animateTo: 2160,                callback: function () {                    alert('网络超时')                }            });        };        var rotateFunc = function (awards, angle, header,body,success,data) {  //awards:奖项，angle:奖项对应的角度            $('#lotteryBtn').stopRotate();            $("#lotteryBtn").rotate({                angle: 0,                duration: 5000,                animateTo: angle + 1440,                callback: function () {                    swal(                        header,                        body,                        success                    );                    $('#luckyboys').empty();                    for (var i=0;i<data.length;i++){                        $('#luckyboys').append(                            '<div class="person">'+                            '<span>'+data[i].host+'</span>'+                            '<span>'+data[i].grade+'</span>'+                            '<span>'+data[i].date+'</span>'+                            '</div>');                    }                    $("#lotteryBtn").rotate({                        bind: {                            click:function () {                                $("#lotteryBtn").rotate({                                    bind: {                                        click:function () {                                        }                                    }                                })                                request();                            }                        }                    })                }            });        };        function request() {            $.ajax({                url: '/api/rotate',                type: 'GET',                async: true,                success: function (date) {                    switch (date.code) {                        case -1:                            var angle = [67,112,202,292,337];                            angle = angle[Math.floor(Math.random()*angle.length)];                            rotateFunc(0,angle,'很遗憾','这次您未抽中奖','error',date.luckyBoys);                            break;                        case 1:                            rotateFunc(1,157,'恭喜您','抽中的一等奖','success',date.luckyBoys);                            break;                        case 2:                            rotateFunc(2,247,'恭喜您','抽中的二等奖','success',date.luckyBoys);                            break;                        case 3:                            rotateFunc(3,22,'恭喜您','抽中的三等奖','success',date.luckyBoys);                            break;                    }                },                error: function () {                    swal(                        '很意外',                        '你的网络有问题',                        'error'                    );                }            });        }        $("#lotteryBtn").rotate({            bind: {                click: function (event) {                    $("#lotteryBtn").rotate({                        bind: {                            click:function () {                            }                        }                    })                    request();                }            }        });    })</script></html>